<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>$.js vs</title>
		<meta name="description" content="Demo: Include.js loading OpenId module" />
		<meta name="author" content="dan.s.ward" />
		<link rel="stylesheet" type="text/css" href="css/0x24.css" />
		<link rel="stylesheet" type="text/css" href="css/menu.css" />
	</head>
	<body>
		<div id="content">
			<p style="text-align:center;">
				<button id="signin-link" class="button-link">Sign In</button>
				<button id="signout-link" class="button-link">Sign Out</button>
			</p>
			<hr />
			<h1>$ [Hex 24]</h1>
			<p>
				This shows what should happen. Clicking the buttons above should activate
				an OpenId module which you can play with until you get bored.
			</p>
			<img src="images/$.js.png" alt="win" width="100%" />
		</div>
		<script type="text/javascript" src="/0x24/js/lib/$.js"></script>
		<script type="text/javascript">
			$.require('/0x24/$.js.html',
			[
				$.path + '$.dom.js',
				$.path + '$.events.js',
				$.path + '$.openid-ui.js'
			],
			function() {
				var signinLink = document.getElementById("signin-link"),
					signoutLink = document.getElementById("signout-link"),
					openid;
				
				function signin() { $.events.publish('openid-signin-request', openid); }
				function signout() { $.events.publish('openid-signout-request', openid); }
				$.dom.addEventListener(signinLink, "click", signin);
				$.dom.addEventListener(signoutLink, "click", signout);
				
				function toggleSignIn(resp) {
					openid = resp;
					signinLink.style.display = (openid.userId.length ? 'none' : 'inline');
					signoutLink.style.display = (openid.userId.length ? 'inline' : 'none');
				}
				$.events.subscribe('openid-update-response', toggleSignIn);
				$.events.publish('openid-update-request', openid);
			});
		</script>
	</body>
</html>